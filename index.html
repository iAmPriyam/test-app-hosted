<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>Examples</title>
        <meta
            name="viewport"
            content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"
        />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <link href="./assets/css/style.css" rel="stylesheet" />
    </head>
    <body>
        <div class="main">
            <div class="label">Generated token will appear below</div>
            <p id="token" class="para"></p>
            <p id="subscription" class="para"></p>
            <!-- <button id="add-notification">add notification</button> -->
        </div>
        <!-- <button onclick="notifyMe()">Notify me!</button> -->

        <!-- <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-messaging.js"></script> -->
        <script>
            // var firebaseConfig = {
            //     apiKey: "AIzaSyAINhrncfsqoz3KGYy-EUpcX_aIdUHgDk4",
            //     authDomain: "test-app-hosted.firebaseapp.com",
            //     databaseURL: "https://test-app-hosted.firebaseio.com",
            //     projectId: "test-app-hosted",
            //     storageBucket: "test-app-hosted.appspot.com",
            //     messagingSenderId: "808732067852",
            //     appId: "1:808732067852:web:4020e40a782914de440629",
            //     measurementId: "G-WWPKQD0YRC",
            // };
            // firebase.initializeApp(firebaseConfig);
            // const messaging = firebase.messaging();

            // function IntitalizeFireBaseMessaging() {
            //     messaging
            //         .requestPermission()
            //         .then(function () {
            //             console.log("Notification Permission");
            //             return messaging.getToken();
            //         })
            //         .then(function (token) {
            //             console.log("Token : " + token);
            //             document.getElementById("token").innerHTML = token;
            //         })
            //         .catch(function (reason) {
            //             console.log(reason);
            //         });
            // }

            // messaging.onMessage(function (payload) {
            //     console.log(payload);
            //     const notificationOption = {
            //         body: payload.notification.body,
            //         icon: payload.notification.icon,
            //     };

            //     if (Notification.permission === "granted") {
            //         var notification = new Notification(
            //             payload.notification.title,
            //             notificationOption
            //         );

            //         notification.onclick = function (ev) {
            //             ev.preventDefault();
            //             window.open(
            //                 payload.notification.click_action,
            //                 "_blank"
            //             );
            //             notification.close();
            //         };
            //     }
            // });
            // messaging.onTokenRefresh(function () {
            //     messaging
            //         .getToken()
            //         .then(function (newtoken) {
            //             console.log("New Token : " + newtoken);
            //         })
            //         .catch(function (reason) {
            //             console.log(reason);
            //         });
            // });
            // IntitalizeFireBaseMessaging();

            // if ("serviceWorker" in navigator) {
            //     console.log("yes");
            //     navigator.serviceWorker
            //         .register("/sw.js")
            //         .then((registration) => {
            //             console.log("serviceWorker registered", registration);
            //             registration.onupdatefound = () => {
            //                 const installingWorker = registration.installing;
            //                 if (installingWorker == null) {
            //                     return;
            //                 }
            //                 installingWorker.onstatechange = () => {
            //                     if (installingWorker.state === "installed") {
            //                         if (navigator.serviceWorker.controller) {
            //                             // At this point, the updated precached content has been fetched,
            //                             // but the previous service worker will still serve the older
            //                             // content until all client tabs are closed.
            //                             console.log(
            //                                 "New content is available and will be used when all " +
            //                                     "tabs for this page are closed. See https://bit.ly/CRA-PWA."
            //                             );

            //                             // Execute callback
            //                             if (config && config.onUpdate) {
            //                                 config.onUpdate(registration);
            //                             }
            //                         } else {
            //                             // At this point, everything has been precached.
            //                             // It's the perfect time to display a
            //                             // "Content is cached for offline use." message.
            //                             console.log(
            //                                 "Content is cached for offline use."
            //                             );

            //                             // Execute callback
            //                             if (config && config.onSuccess) {
            //                                 config.onSuccess(registration);
            //                             }
            //                         }
            //                     }
            //                 };
            //             };
            //             // const subscription = getEndpoint();
            //             console.log("subscription", subscription);
            //         })
            //         .catch((err) =>
            //             console.error("service worker not registered", err)
            //         );
            // }
        </script>
        <script src="./firebase-messaging-sw.js"></script>
        <script src="/assets/js/notify.js"></script>
        <script src="./assets/js/index.js"></script>
    </body>
</html>
